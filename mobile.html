<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="mobile.css">
    <title> FAMdat</title>
</head>

<body>
    <div class="menu-button" onclick="toggleMenu()">
        <i class="fa-solid fa-music"></i>
    </div>
    
    <div class="menu" id="menu">
        <div class="menu-buttons">
            <ul>
                <li><a href="./saved-songs.html">Saved Songs</a></li>
                <li><a href="./mobile.html">Random (WIP)</a></li>
                <li><a href="">All Music (WIP)</a></li>
            </ul>
        </div>
        <hr>
        <div class="menu-song-list">
            <ul id="menu-song-list">
                <!-- Songs, pwease load. -->
            </ul>
        </div>
    </div>


    <script>
    function toggleMenu() {
        var menu = document.getElementById("menu");
        menu.classList.toggle("show");
    }

    // Close the menu when clicking outside of it
    document.addEventListener("click", function (event) {
        var menu = document.getElementById("menu");
        var menuButton = document.querySelector(".menu-button");

        if (!menu.contains(event.target) && !menuButton.contains(event.target)) {
            menu.classList.remove("show");
        }
    });
    </script>



    <div class="background">
        <img src="" id="bg-img">
    </div>
    <p>
    <p>
    <p>
    <p>
    <p>
    <p>
    <div class="container">
        <div class="player-img">
            <img src="" class="active" id="cover">
        </div>

        <h2 id="music-title"></h2>
        <h3 id="music-style"></h3>

        <div class="player-progress" id="player-progress">
            <div class="progress" id="progress"></div>
            <div class="music-duration">
                <span id="current-time">0:00</span>
                <span id="duration">0:00</span>
            </div>
        </div>

        <div class="player-controls">
            <i class="fa-solid fa-heart" title="Save" id="save"></i>
            <i class="fa-solid fa-backward" title="Previous" id="prev"></i>
            <i class="fa-solid fa-play play-button" title="Play" id="play"></i>
            <i class="fa-solid fa-forward" title="Next" id="next"></i>
            <i class="fa-solid fa-download" title="Download" id="download"></i>
        </div>
        <!--<div class="music-ad" id="music-ad">
            <span>Looking for wordless music? <a href="./wordLess/index.html">GO!</a></span>
            <i class="fa-solid fa-xmark close-ad" id="close-ad"></i>
        </div>
        <div class="saved-ad" id="saved-ad">
          <span>Looking for your saved songs? <a href="./saved-songs.html">GO!</a></span>
          <i class="fa-solid fa-xmark close-ad2" id="close-ad2"></i>
        </div>-->
    </div>
    <p>
    <p>

    <p>
    <p>
    

    <script src="index.js"></script>
    <!--<script>
        (function() {
      var devtoolsOpen = false;
      var threshold = 160;
      
      setInterval(function() {
        if (window.outerWidth - window.innerWidth > threshold || window.outerHeight - window.innerHeight > threshold) {
          devtoolsOpen = true;
        } else {
          devtoolsOpen = false;
        }

        if (devtoolsOpen) {
          document.body.innerHTML = '';
          window.close();
          window.location = 'about:blank';
        }
      }, 500);
    })();
    </script>-->






    <div class="loading-screen" id="loading-screen">
        <div class="music-wave">
            <div class="wave-bar"></div>
            <div class="wave-bar"></div>
            <div class="wave-bar"></div>
            <div class="wave-bar"></div>
            <div class="wave-bar"></div>
        </div>
        <div class="loading-text">
            <h1>FAMdat</h1>
            <p>Fetching your music...</p>
        </div>
    </div>







</body>
<script>
    function checkScreenWidth() {
        if (window.innerWidth > 1350) {
            window.location.href = "index.html";
        }
    }

    checkScreenWidth();
    window.addEventListener('resize', checkScreenWidth);
</script>
<script>
let startX = 0;
let endX = 0;
let startY = 0;
let endY = 0;
const menu = document.getElementById("menu");

document.addEventListener("touchstart", (e) => {
    startX = e.touches[0].clientX;
    startY = e.touches[0].clientY;
});

document.addEventListener("touchmove", (e) => {
    endX = e.touches[0].clientX;
    endY = e.touches[0].clientY;
});

document.addEventListener("touchend", () => {
    let deltaX = startX - endX;
    let deltaY = startY - endY;

    if (Math.abs(deltaX) > Math.abs(deltaY)) {
        // Horizontal swipe (left or right)
        if (deltaX > 50) {
            // Swipe left → Next song
            changeMusic(1);
        } else if (deltaX < -50) {
            // Swipe right → Previous song
            changeMusic(-1);
        }
    } else {
        // Vertical swipe (up or down)
        if (deltaY > 50) {
            // Swipe up → Open menu
            menu.classList.add("show");
        } else if (deltaY < -50) {
            // Swipe down → Close menu
            menu.classList.remove("show");
        }
    }
});

</script>

<script>
    function populateMenuSongList() {
    const menuSongList = document.getElementById("menu-song-list");
    menuSongList.innerHTML = ""; // Clear existing list

    songs.forEach((song, index) => {
        const listItem = document.createElement("li");
        listItem.textContent = song.displayName;
        listItem.onclick = () => {
            musicIndex = index;
            loadMusic(songs[musicIndex]);
            playMusic();
            toggleMenu(); // Close menu after selecting
        };
        menuSongList.appendChild(listItem);
    });
}

// Call function after page loads
document.addEventListener("DOMContentLoaded", populateMenuSongList);

</script>
</html>
